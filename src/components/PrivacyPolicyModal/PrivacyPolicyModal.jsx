import { useState } from 'react';
import './PrivacyPolicyModal.css';

const PrivacyPolicyModal = ({ isOpen, onClose }) => {
  const [isAgreed, setIsAgreed] = useState(false);

  // Блокируем скролл через класс
  if (isOpen) {
    document.body.classList.add('modal-open');
  } else {
    document.body.classList.remove('modal-open');
  }

  const handleOverlayClick = (e) => {
    if (e.target === e.currentTarget) {
      onClose();
    }
  };

  const handleAgreeChange = () => {
    setIsAgreed(!isAgreed);
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    if (isAgreed) {
      window.location.href = '/payment';
    }
  };

  if (!isOpen) return null;

  return (
    <div className="modal-overlay" onClick={handleOverlayClick}>
      <div className="modal-content">
        <button className="modal-close" onClick={onClose}>×</button>

        <h2 className="modal-title">Политика конфиденциальности</h2>

        <div className="modal-scrollable">
          <div className="policy-text">

            <p>1.	Для удобства восприятия Политики конфиденциальности термин «Пользователь» заменён словами «Клиент», «Администратор» — «Коуч». Термин «GDPR» (RODO) означает Регламент Европейского парламента и Совета (ЕС) 2016/679 от 27 апреля 2016 года о защите физических лиц в связи с обработкой персональных данных и о свободном обращении таких данных, а также об отмене Директивы 95/46/EC.</p>

            <p>2.	Администратором персональных данных является Антонина Сапего, ведущая предпринимательскую деятельность под фирмой Antanina Sapeha, адрес: ул. Лесная 60B/6, 64-800 Ходзеж, NIP: 6070098208, REGON: 541418137.</p>

            <p>3.	Связаться с Администратором по вопросам, связанным с защитой персональных данных, можно:</p>
            <ol className="modal-list-item">
              <li>по электронной почте: antaninasapego@gmail.com;</li>
              <li>традиционной почтой: ул. Лесная 60B/6, 64-800 Ходзеж.</li>
            </ol>

            <p>4.	Безопасность данных Клиента является для Коуча приоритетом, поэтому в соответствии с GDPR Коуч внедрил и поддерживает организационные и технические меры, соразмерные выявленным рискам. Внедрённые меры периодически пересматриваются и при необходимости модифицируются. Для обеспечения целостности и конфиденциальности данных внедрены процедуры, позволяющие предоставлять доступ к персональным данным только уполномоченным лицам.</p>

            <p>5.	Коуч обязуется:</p>
            <ol className="modal-list-item">
              <li>обеспечивать защиту переданных персональных данных посредством применения соответствующих технических и организационных мер, адекватных выявленному риску, в частности для защиты от незаконной обработки, уничтожения, утраты, модификации, несанкционированного раскрытия или доступа, а также от случайной утраты, уничтожения или повреждения (гарантия целостности и конфиденциальности данных);</li>
              <li>уполномочить всех лиц, обрабатывающих персональные данные, на их обработку исключительно с целью исполнения настоящего Договора;</li>
              <li>обеспечивать сохранение конфиденциальности переданных персональных данных уполномоченными лицами как в период их занятости, так и после её прекращения;</li>
              <li>незамедлительно уведомлять другую Сторону о любых случаях нарушения защиты или ненадлежащего использования переданных данных;</li>
              <li>удалять переданные персональные данные после завершения действия Договора в сроки, соответствующие действующему законодательству, в частности в части хранения бухгалтерской и налоговой документации (не менее 5 лет), а также с учётом срока, необходимого для установления, предъявления или защиты правовых требований.</li>
            </ol>

            <p>6.	Персональные данные Клиента обрабатываются в следующих целях:</p>
            <ol className="modal-list-item">
              <li>исполнение Договора или принятие мер по запросу Клиента до его заключения (ст. 6 ч. 1 лит. b GDPR);</li>
              <li>предоставление ответа на запросы (контактная форма, e-mail, мессенджеры, телефон, Instagram) — в части дополнительных данных на основании согласия Клиента (ст. 6 ч. 1 лит. a GDPR);</li>
              <li>ведение переписки, не связанной напрямую с Договором, включая телефонный контакт или через интернет-мессенджеры (Telegram, Instagram Direct, WhatsApp или иной согласованный канал), например запросы относительно предложений или обучения, — исключительно для коммуникации и решения вопросов, которых касается переписка, на основании законного интереса Администратора (ст. 6 ч. 1 лит. f GDPR);</li>
              <li>продвижение собственной марки и услуг через публичный профиль в Instagram — на основании законного интереса Администратора (ст. 6 ч. 1 лит. f GDPR).</li>
            </ol>

            <p>7.	Согласие на обработку персональных данных Клиента является добровольным, однако его отсутствие может препятствовать пользованию некоторыми услугами.</p>

            <p>8.	В связи с деятельностью, требующей обработки персональных данных, данные Клиента могут быть раскрыты внешним субъектам, в частности поставщикам ИТ-систем и оборудования, почтовым операторам, курьерам, маркетинговым агентствам.</p>

            <p>9.	Может возникнуть необходимость раскрытия данных Клиента компетентным органам или третьим лицам, предъявившим соответствующий законный запрос.</p>

            <p>10.	Передача данных Клиента за пределы ЕЭЗ не планируется. Если же такая необходимость возникнет, передача будет осуществляться исключительно посредством:</p>
            <ol className="modal-list-item">
              <li>применения стандартных договорных положений, утверждённых Европейской комиссией;</li>
              <li>применения обязательных корпоративных правил, утверждённых компетентным надзорным органом.</li>
            </ol>

            <p>11.	Если на сайте используются файлы cookies или иные технологии отслеживания, Администратор информирует об этом пользователей при первом посещении и запрашивает согласие в случаях, когда это требуется. Подробности изложены в Политике Cookies, доступной на сайте.</p>

            <p>12.	Срок хранения персональных данных:</p>
            <ol className="modal-list-item">
              <li>бухгалтерские документы (счета, налоговая документация) — в течение срока, установленного налоговым законодательством, не менее 5 лет;</li>
              <li>переписка и записи, касающиеся исполнения Договора (подтверждения бронирования, электронные письма) — в течение 2 лет после завершения сотрудничества (если иное не предусмотрено законом);</li>
              <li>заметки с коучинговых сессий — в течение 2 лет, если Клиент не даст согласие на более длительное хранение;</li>
              <li>данные, обрабатываемые на основании маркетингового согласия, — до момента его отзыва;</li>
              <li>срок обработки может быть продлён, если это необходимо для установления, предъявления или защиты правовых требований.</li>
            </ol>

            <p>13.	Клиенту предоставляются следующие права в связи с обработкой персональных данных:</p>
            <ol className="modal-list-item">
              <li>право на информацию об обработке персональных данных;</li>
              <li>право на получение копии персональных данных;</li>
              <li>право на исправление персональных данных;</li>
              <li>право на удаление персональных данных («право быть забытым»);</li>
              <li>право на ограничение обработки;</li>
              <li>право на перенос данных;</li>
              <li>право на возражение против обработки персональных данных;</li>
              <li>hправо на отзыв согласия на обработку, если обработка основана на согласии;</li>
              <li>право на подачу жалобы в Управление по защите персональных данных.</li>
            </ol>

            <p>14.	Для реализации прав, вытекающих из GDPR, Клиент может связаться с Администратором в соответствии с информацией, указанной в п. 2.</p>

            <p>15.	В случае нарушения защиты персональных данных Администратор уведомляет компетентный надзорный орган незамедлительно, а при возможности — в течение 72 часов с момента выявления нарушения. Если нарушение может повлечь высокий риск нарушения прав и свобод физических лиц, Администратор также уведомляет об этом соответствующих субъектов данных без неоправданной задержки.</p>

            <p>16.	Актуальная версия Политики действует с 01.10.2025 и может обновляться в случае изменений законодательства или организационных изменений.</p>
          </div>
        </div>

        <form className="modal-actions" onSubmit={handleSubmit}>
          <label className="agree-checkbox">
            <input
              type="checkbox"
              checked={isAgreed}
              onChange={handleAgreeChange}
            />
            <span className="checkmark"></span>
            Я ознакомлен(а) с регламентом и согласен(на)
          </label>

          <button
            className={`pay-button ${isAgreed ? 'active' : 'disabled'}`}
            disabled={!isAgreed}
          >
            Перейти к оплате
          </button>
        </form>
      </div>
    </div>
  );
};

export default PrivacyPolicyModal;